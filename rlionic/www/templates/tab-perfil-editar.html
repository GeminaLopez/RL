<ion-view title="Perfil">
	<ion-content class="padding">
		<h2>Editar mis datos</h2>

		<div ng-if="errores">
			<ul class="alert errors"> 
				<li>Por favor revisá estos campos:</li>
				<li ng-repeat="(key,val) in errores">
						{{val[0]}}
				</li>
			</ul>
		</div>

		<div>
			<form ng-submit="editar(user)">
				<div class="list">
					<label class="item item-input item-stacked-label">
						<span class="input-label">Nombre:</span>
						<input type="text" ng-model="user.nombre">
						<!--<div class="alert errors" ng-if="errores.nombre != null">{{ errores.nombre[0] }}</div>-->
					</label>
					<label class="item item-input item-stacked-label">
						<span class="input-label">Apellido:</span>
						<input type="text" ng-model="user.apellido">
						<!--<div class="alert errors" ng-if="errores.apellido != null">{{ errores.apellido[0] }}</div>-->
					</label>
					<label class="item item-input item-stacked-label">
						<span class="input-label">Fecha de nacimiento</span>
						<input type="date" ng-model="user.fecha_nac" ng-change="calcularEdad(user.fecha_nac)"/>
						<!--<div class="alert errors" ng-if="errores.fecha_nac != null">{{ errores.fecha_nac[0] }}</div>-->
					</label>
					<label class="item item-input item-select">
						<div class="input-label">
							Género
						</div>
						<select ng-options="genero.id_genero as genero.genero for genero in generos" ng-model="user.id_genero">
						</select>
						<!--<div class="alert errors" ng-if="errores.id_genero != null">{{ errores.id_genero[0] }}</div>-->
					</label>
					<label class="item item-input item-select">
						<div class="input-label">
							Ciudad
						</div>
						<select ng-options="ciudad.id_ciudad as ciudad.ciudad for ciudad in ciudades" ng-model="user.id_ciudad">
						</select>
						<!--<div class="alert errors" ng-if="errores.id_ciudad != null">{{ errores.id_ciudad[0] }}</div>-->
					</label>
					<ul class="list">
						<li class="item item-toggle">
							¿Desea brindar servicio sexual?
							<label class="toggle toggle-assertive">
								<input type="checkbox" ng-model="user.brinda_servicio" ng-true-value="1" ng-false-value="0" ng-checked="user.brinda_servicio">
								<div class="track">
									<div class="handle"></div>
								</div>
							</label>
						</li>		
					</ul>
					<label class="item item-input item-stacked-label">
						<span class="input-label avatar">Avatar actual: </span>
						<div class="item item-image">
							<img alt="Foto de Perfil de {{user.nombre}}" ng-src="{{api_server+user.avatar}}" />
						</div>				
					</label>
					<label class="item item-input item-stacked-label">
						<span class="input-label avatar">Presione aquí si desea cambiar su avatar: </span>
						<div class="button button-block button-positive" id="btnIMG">
							<i class="icon ion-image">	
								<input type="file" ng-model="user.avatar" class="avatar" style="display:none"  custom-on-change="suboImagen" ng-click="suboImagen($event); $event.preventDefault();" />	
							</i>
						</div>
						
						<div>Si no también podes tomarte una foto</div> 
					
						<button type="button" class="button button-positive" ng-click="tomarFoto()" ng-model="user.avatar" class="avatar">
							<i class="icon ion-camera"></i>
						</button>
							
						<div class="item-image">
							<img ng-src="{{avatar}}">
						</div>
					
					</label>
					
				</div>
				<button class="button button-block button-positive" ng-disabled="edad<18">Guardar</button>
			</form>
		</div>
	</ion-content>
</ion-view>